<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>AppArmor</title>
  <meta name='description' content='Concepts and features of the AppArmor security tool.'>

  <link rel="canonical" href="http://localhost:6060/blog/apparmor">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AppArmor – Daniel">
  <meta name="twitter:description" content="Concepts and features of the AppArmor security tool.">
  <meta name="twitter:image:src" content="https://media.giphy.com/media/RDZo7znAdn2u7sAcWH/giphy.gif">

  <!-- Facebook OpenGraph -->
  <meta property="og:title" content="AppArmor – Daniel">
  <meta property="og:description" content="Concepts and features of the AppArmor security tool.">
  <meta property="og:image" content="https://media.giphy.com/media/RDZo7znAdn2u7sAcWH/giphy.gif">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">

  <!-- Ionicons -->
  <link href="https://unpkg.com/ionicons@4.5.0/dist/css/ionicons.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="shortcut icon" href="/images/favicon.ico">
</head>

<body>

    

    <!-- begin header -->
<header class="c-header">
  <div class="container">
    <div class="row">
      <div class="c-header__inner">

        <div class="logo">
          <a class="logo__link" href="/">
          
            <img class="logo__image" src="/resources/images/ico_skull_yellow.png" alt="Daniel">
          
          </a>
        </div>

        <nav class="main-nav">
          <div class="main-nav__box">

            <div class="nav__icon-close">
              <i class="ion ion-md-close"></i>
            </div>

            <div class="nav__title">Menu</div>

              <ul class="nav__list list-reset">

              
                
                <li class="nav__item">
                  <a href="/" class="nav__link">HOME</a>
                </li>
                
              
                
                <li class="nav__item">
                  <a href="/projects/" class="nav__link">PROJECTS</a>
                </li>
                
              
                
                <li class="nav__item">
                  <a href="/blog/" class="nav__link">BLOG</a>
                </li>
                
              
                
                <li class="nav__item">
                  <a href="/about/" class="nav__link">ABOUT</a>
                </li>
                
              

            </ul>
          </div>

          <!--bookshop-live name(social-link.jekyll.html) params() context() -->
          
<div class="social">
  <ul class="social__list list-reset">
    
    <li class="social__item">
      <a class="social__link" href="https://github.com/goldcod3" target="_blank" rel="noopener" aria-label="github icon"><i class="ion ion-logo-github"></i></a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://twitter.com/goldcod3" target="_blank" rel="noopener" aria-label="twitter icon"><i class="ion ion-logo-twitter"></i></a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://linkedin.com/in/luisdanielgo" target="_blank" rel="noopener" aria-label="linkedin icon"><i class="ion ion-logo-linkedin"></i></a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://instagram.com/goldcod3" target="_blank" rel="noopener" aria-label="instagram icon"><i class="ion ion-logo-instagram"></i></a>
    </li>
    
  </ul>
</div>

          <!--bookshop-live end-->
        </nav>

        <div class="nav-button">
          <i class="nav__icon nav__icon-menu ion ion-md-menu"></i>
        </div>

      </div>
    </div>
  </div>
</header>
<!-- end header -->

    <div class="post-top">
  <div class="container">
    <div class="row">

      
      <div class="col col-6 col-d-12">
        <div class="post-image">
          <img loading="lazy" src="https://media.giphy.com/media/RDZo7znAdn2u7sAcWH/giphy.gif" alt="AppArmor">
        </div>
      </div>
      

      <div class="col col-6 col-d-12">
        <div class="post__info">

          
          <div class="post-tags">
            
              <a href="/tag/linux" class="post-tags__tag">Linux</a>
            
              <a href="/tag/security" class="post-tags__tag">Security</a>
            
              <a href="/tag/debian" class="post-tags__tag">Debian</a>
            
              <a href="/tag/guide" class="post-tags__tag">Guide</a>
            
          </div>
          


          <h1 class="post__title">AppArmor</h1>

          <div class="post__meta">
            <div class="post__author-image">
              <img loading="lazy" src="/resources/images/img_avatar.png" alt="goldcod3">
            </div>

            <div class="post__meta-bottom">
              <div class="post__author">goldcod3</div>
              <time class="post__date" datetime="2022-08-12T17:01:35+02:00">12 Aug 2022</time>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- begin post -->
<div class="container animate">

  <article class="post">

    <div class="post__content">
      <h1 id="apparmor"><strong>AppArmor</strong></h1>
<p>AppArmor is what is called a <strong>mandatory access control</strong> <a href="/blog/access-control">MAC</a> mechanism, it acts by establishing a series of restrictions on the resources that can be accessed by the different applications it controls. It was born as an external development promoted by Novell, and only distributions such as openSUSE or SUSE Linux Enterprise started benefiting from it. <strong>Today it is part of the Linux kernel</strong>, since Canonical proposed it for integration in the main branch, in version 2.6.36.</p>

<center>
<img src="/resources/posts/apparmor-logo.png" />
</center>

<p>Today it is integrated by default in most of the distributions, such as <strong>Ubuntu</strong>, which can be said to have integrated it practically since its beginnings, as well as all its derivatives, or <strong>Debian</strong>, which in this case has joined later, and has been enabled since Debian 10. Other distros such as Fedora or RHEL, do not come with it, but because traditionally they have always bet on <em>SELinux</em>, a system with a similar approach, although much more complex to manage.</p>

<p>AppArmor is loaded, with all its profiles, in the kernel during the boot, if we want to verify that it is correctly enabled in the system we execute the following command, which will return <code class="language-plaintext highlighter-rouge">Yes</code> if it is active:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo aa-enabled
</code></pre></div></div>

<p>If we want to see more details of the status of this tool we execute:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo aa-status
</code></pre></div></div>

<p>AppArmor has specific profiles for each of the applications it controls, which would be the equivalent of SELinux policies. However, AppArmor’s profiles are significantly easier to understand and configure, resulting in a more user-friendly system. AppArmor does not have attributes like SELinux, and the way it recognizes a program is through its path. Thus, each AppArmor profile points to a specific path, and details what actions the executable behind this path is allowed to perform.</p>

<h3 id="profiles">Profiles:</h3>
<p>AppArmor profiles are loaded into the kernel itself during boot, and can be run in two main modes: <strong>enforce</strong> and <strong>complain</strong>.</p>
<ul>
  <li><strong>enforce</strong>: in this mode a forced enforcement of the defined policy is performed and any violation attempt is reported via syslog or auditd.</li>
  <li><strong>complain</strong>: this mode does not enforce the policy, but reports any attempted violation.</li>
</ul>

<p>To switch the profile between <strong>enforce</strong> and <strong>complain</strong> we must install the <code class="language-plaintext highlighter-rouge">apparmor-utils</code> package:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install apparmor-utils
</code></pre></div></div>

<p>Each application is assigned an AppArmor profile; each implementation of this tool comes by default with a specific number of profiles, but more profiles are being added all the time. In addition, many applications, when installed, are already configured to create their own AppArmor profile. For applications that do not yet have a specific profile, you can create your own profile yourself, although you must take into account that if the program is not prepared, it is possible that it may present errors in its execution.</p>

<p>To create a specific profile for an application, we do it by means of the command:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo aa-genprof &lt;app-path&gt;
</code></pre></div></div>
<p>Where the <code class="language-plaintext highlighter-rouge">&lt;app-path&gt;</code> is the file path to the application that you want to profile. The default application folder is <code class="language-plaintext highlighter-rouge">/usr/bin</code>, but it could be different depending on the application.</p>

<hr />
<h3 id="profile-assignment">Profile Assignment:</h3>
<p>To set a profile that is loaded in <em>complain</em> mode to be loaded in <em>enforce</em> mode, you can run:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo aa-enforce &lt;profile-path&gt;
</code></pre></div></div>

<p>We can also change a profile from <em>enforce</em> mode to <em>complain</em> mode by executing:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo aa-complain &lt;profile-path&gt;
</code></pre></div></div>

<p>AppArmor profiles are usually located in the <code class="language-plaintext highlighter-rouge">etc/apparmor.d/</code> path,
to see a list of all existing profiles we can run:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ls /etc/apparmor.d
</code></pre></div></div>

<p>To examine a specific profile we can execute the command:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo cat /etc/apparmor.d/&lt;profile-name&gt;
</code></pre></div></div>

<p>If you want more information about this amazing tool you can visit the <a href="https://apparmor.net/">official</a> page.</p>

<center>
<img src="https://media.giphy.com/media/Q61LJj43H48z1FIK4X/giphy-downsized-large.gif" />
</center>

    </div>

    <!--<div class="post__share">
  <div class="share__head">
    <div class="share__title">Share this Post</div>
  </div>
  <ul class="share__list list-reset">
    <li class="share__item">
      <a class="share__link share__twitter"
        href="https://twitter.com/intent/tweet?text=AppArmor&url=http://localhost:6060/blog/apparmor"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on Twitter" rel="nofollow"><i class="ion ion-logo-twitter"></i></a>
    </li>
    <li class="share__item">
      <a class="share__link share__facebook"
        href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:6060/blog/apparmor"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on Facebook" rel="nofollow"><i class="ion ion-logo-facebook"></i></a>
    </li>
    <li class="share__item">
      <a class="share__link share__pinterest"
        href="http://pinterest.com/pin/create/button/?url=http://localhost:6060/blog/apparmor&amp;media=http://localhost:6060https://media.giphy.com/media/RDZo7znAdn2u7sAcWH/giphy.gif&amp;description=AppArmor"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on Pinterest" rel="nofollow"><i class="ion ion-logo-pinterest"></i></a>
    </li>
    <li class="share__item">
      <a class="share__link share__linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:6060/blog/apparmor&title=AppArmor&summary=Concepts%20and%20features%20of%20the%20AppArmor%20security%20tool.&source=Daniel"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Share on LinkedIn" rel="nofollow"><i class="ion ion-logo-linkedin"></i></a>
    </li>
  </ul>
</div>-->

  </article>
</div>
<!-- end post -->


<div class="container">
  <div class="row">
    <div class="col col-10 col-d-12 push-d-0 push-1">
      <div class="post__navigation animate">
  
  <a class="post__prev" href="/blog/selinux">
    <div class="prev__image">
      <img loading="lazy" src="https://media.giphy.com/media/077i6AULCXc0FKTj9s/giphy.gif" alt="AppArmor">
    </div>
    <div class="prev__box">
      <span class="post__nav post__nav__prev">Prev post</span>
      <h2 class="post__nav__title">SELinux</h2>
    </div>
  </a>
  

  
  <a class="post__next" href="/blog/virtual-machines">
    <div class="next__box">
      <span class="post__nav post__nav__next">Next post</span>
      <h2 class="post__nav__title">Virtual Machines</h2>
    </div>
    <div class="next__image">
      <img loading="lazy" src="https://media.giphy.com/media/l1J9qemh1La8b0Rag/giphy.gif" alt="AppArmor">
    </div>
  </a>
  
</div>
    </div>
  </div>
</div>







<!-- begin related posts -->
<div class="container">
  <section class="related-posts is-related animate">
    <div class="row">
      <div class="col col-12">
        <div class="container__inner">
          <div class="section__info">
            <div class="section__head">
              <h2 class="section__title">You may also like</h2>
              <a class="section__link" href="/blog">
                
                
                  
                    <a href="/tags#Linux" class="section__link related-tag">See all<span> Linux</span> <i class="ion ion-md-arrow-forward"></i></a>
                  
                
                  
                
                  
                
                  
                
              
              </a>
            </div>
          </div>
          <div class="row">

          
            
            
      
            
      
            

              <div class="article col col-4 col-d-6 col-t-12">
                <div class="article__inner">
              
                  
                  <div class="image-wrap">
                    <a class="article__image" href="/blog/ufw">
                      <img loading="lazy" src="https://media.giphy.com/media/VGwTq3G6a39cI/giphy.gif" alt="UFW">
                    </a>
                  </div>
                  
              
                  <div class="article__content">
              
                    
                    <div class="article-tags__box">
                      
                      <a href="/tag/linux" class="article__tag">Linux</a>
                      
                      <a href="/tag/firewall" class="article__tag">Firewall</a>
                      
                      <a href="/tag/guide" class="article__tag">Guide</a>
                      
                    </div>
                    
              
                    <h2 class="article__title">
                      <a href="/blog/ufw">UFW</a>
                    </h2>
              
                    <p class="article__excerpt">
                      See what a firewall is and how it protects your computer from threats.
                    </p>
              
                    <div class="article__meta">
                      <div class="article__author-image">
                        <img loading="lazy" src="/resources/images/img_avatar.png" alt="goldcod3">
                      </div>
                      <div class="article-info">
                        <div class="article__author-name">goldcod3</div>
                        <span class="article__date"><time datetime="2022-08-27T16:01:35+02:00">27 Aug 2022</time></span>
                      </div>
                    </div>
              
                  </div>
                </div>
              </div>

            
                
              
            
            
            
      
            
      
            

              <div class="article col col-4 col-d-6 col-t-12">
                <div class="article__inner">
              
                  
                  <div class="image-wrap">
                    <a class="article__image" href="/blog/apt-aptitude">
                      <img loading="lazy" src="https://media.giphy.com/media/3oKIP9cJEOO9ljKoCc/giphy.gif" alt="Apt vs Aptitude">
                    </a>
                  </div>
                  
              
                  <div class="article__content">
              
                    
                    <div class="article-tags__box">
                      
                      <a href="/tag/linux" class="article__tag">Linux</a>
                      
                      <a href="/tag/debian" class="article__tag">Debian</a>
                      
                      <a href="/tag/guide" class="article__tag">Guide</a>
                      
                    </div>
                    
              
                    <h2 class="article__title">
                      <a href="/blog/apt-aptitude">Apt vs Aptitude</a>
                    </h2>
              
                    <p class="article__excerpt">
                      Learn what a package manager is and how to use it.
                    </p>
              
                    <div class="article__meta">
                      <div class="article__author-image">
                        <img loading="lazy" src="/resources/images/img_avatar.png" alt="goldcod3">
                      </div>
                      <div class="article-info">
                        <div class="article__author-name">goldcod3</div>
                        <span class="article__date"><time datetime="2022-08-24T00:01:35+02:00">24 Aug 2022</time></span>
                      </div>
                    </div>
              
                  </div>
                </div>
              </div>

            
                
              
            
            
            
      
            
      
            

              <div class="article col col-4 col-d-6 col-t-12">
                <div class="article__inner">
              
                  
                  <div class="image-wrap">
                    <a class="article__image" href="/blog/lvm">
                      <img loading="lazy" src="https://media.giphy.com/media/l0NwPdduX7IL1rS1i/giphy.gif" alt="LVM">
                    </a>
                  </div>
                  
              
                  <div class="article__content">
              
                    
                    <div class="article-tags__box">
                      
                      <a href="/tag/linux" class="article__tag">Linux</a>
                      
                      <a href="/tag/lvm" class="article__tag">LVM</a>
                      
                      <a href="/tag/guide" class="article__tag">Guide</a>
                      
                    </div>
                    
              
                    <h2 class="article__title">
                      <a href="/blog/lvm">LVM</a>
                    </h2>
              
                    <p class="article__excerpt">
                      Do you know the Logic Volumes? Learn how to manage them here!
                    </p>
              
                    <div class="article__meta">
                      <div class="article__author-image">
                        <img loading="lazy" src="/resources/images/img_avatar.png" alt="goldcod3">
                      </div>
                      <div class="article-info">
                        <div class="article__author-name">goldcod3</div>
                        <span class="article__date"><time datetime="2022-08-19T18:01:35+02:00">19 Aug 2022</time></span>
                      </div>
                    </div>
              
                  </div>
                </div>
              </div>

            
                
                  
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<!-- end related posts -->





    <!-- 
        Bookshop components are accessed using the bookshop tag, 
        using the same syntax as the standard Jekyll include tag.
    -->
    <!--bookshop-live name(page.jekyll.html) params(content_blocks=page.content_blocks page_theme=page.page_theme) context() -->
          
          <!--bookshop-live end-->

    <div class="top" title="Top"><i class="ion ion-ios-arrow-up"></i></div>

    <!-- begin footer -->
<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col col-12">

        <!--bookshop-live name(social-link.jekyll.html) params() context() -->
          
<div class="social">
  <ul class="social__list list-reset">
    
    <li class="social__item">
      <a class="social__link" href="https://github.com/goldcod3" target="_blank" rel="noopener" aria-label="github icon"><i class="ion ion-logo-github"></i></a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://twitter.com/goldcod3" target="_blank" rel="noopener" aria-label="twitter icon"><i class="ion ion-logo-twitter"></i></a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://linkedin.com/in/luisdanielgo" target="_blank" rel="noopener" aria-label="linkedin icon"><i class="ion ion-logo-linkedin"></i></a>
    </li>
    
    <li class="social__item">
      <a class="social__link" href="https://instagram.com/goldcod3" target="_blank" rel="noopener" aria-label="instagram icon"><i class="ion ion-logo-instagram"></i></a>
    </li>
    
  </ul>
</div>

          <!--bookshop-live end-->

        <ul class="footer_nav list-reset">
          
        </ul>

        <div class="copyright"><p> 2022 - goldcod3 </p></div>

      </div>
    </div>
  </div>
</footer>
<!-- end footer -->

    <!--
        load the live component for CloudCannon live previews.
    -->
    <script>
(function(){
  const bookshopLiveSetup = (CloudCannon) => {
    CloudCannon.enableEvents();

    const head = document.querySelector('head');
    const script = document.createElement('script');
    script.src = `/_cloudcannon/bookshop-live.js`;
    script.onload = function() {
      window.bookshopLive = new window.BookshopLive({
        remoteGlobals: ['/_cloudcannon/bookshop-site-data.json']
      });
      const updateBookshopLive = async () => {
        const frontMatter = await CloudCannon.value();
        const options = window.bookshopLiveOptions || {};
        await window.bookshopLive.update({page: frontMatter}, options);
        CloudCannon?.refreshInterface?.();
      }
      document.addEventListener('cloudcannon:update', updateBookshopLive);
      updateBookshopLive();
    }
    head.appendChild(script);
  }

  document.addEventListener('cloudcannon:load', function (e) {
    bookshopLiveSetup(e.detail.CloudCannon);
  });
})();
</script>

    <script src="/js/scripts.js"></script>
    <script src="/js/common.js"></script>
</body>
</html>